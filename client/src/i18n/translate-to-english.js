import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __dirname = path.dirname(fileURLToPath(import.meta.url));

// Comprehensive French to English translation mapping
const translations = {
  // Common
  "Continuer": "Continue",
  "Réessayer": "Try Again",
  "Mettre à jour": "Update",
  "Créer": "Create",
  "Ajouter": "Add",
  "Retirer": "Remove",
  "Sélectionner": "Select",
  "Télécharger": "Upload", // Context: file upload
  "Envoyer": "Send",
  "Approuver": "Approve",
  "Rejeter": "Reject",
  "En attente": "Pending",
  "Terminé": "Completed",
  "Actif": "Active",
  "Inactif": "Inactive",
  "Disponible": "Available",
  "Indisponible": "Unavailable",
  "Requis": "Required",
  "Optionnel": "Optional",
  "Statut": "Status",
  "Date": "Date",
  "Heure": "Time",
  "Total": "Total",
  "Prix": "Price",
  "Action": "Action",
  "Actions": "Actions",
  "Détails": "Details",
  "Description": "Description",
  "Notes": "Notes",
  "Tous": "All",
  "Télécharger le fichier": "Download", // Context: file download
  
  // Auth - Forgot Password
  "Mot de passe oublié": "Forgot Password",
  "Réinitialisation du mot de passe": "Reset Password",
  "Entrez votre email pour recevoir un lien de réinitialisation": "Enter your email to receive a reset link",
  "Adresse e-mail": "Email Address",
  "votre.email@exemple.com": "your.email@example.com",
  "Envoyer le lien de réinitialisation": "Send Reset Link",
  "Retour à la connexion": "Back to Login",
  "Vérifiez votre e-mail": "Check Your Email",
  "E-mail de réinitialisation envoyé": "Reset Email Sent",
  "Nous avons envoyé un lien de réinitialisation de mot de passe à votre adresse e-mail.": "We have sent a password reset link to your email address.",
  "Si vous ne voyez pas l'e-mail, vérifiez votre dossier spam.": "If you don't see the email, check your spam folder.",
  "Renvoyer l'e-mail": "Resend Email",
  "L'e-mail est requis": "Email is required",
  "Format d'e-mail invalide": "Invalid email format",
  "Trop de tentatives. Veuillez réessayer plus tard.": "Too many attempts. Please try again later.",
  "Erreur réseau. Vérifiez votre connexion.": "Network error. Check your connection.",
  "Service temporairement indisponible": "Service temporarily unavailable",
  "Échec de l'envoi de l'e-mail de réinitialisation": "Failed to send reset email",
  
  // Email Verification
  "Vérification de l'e-mail": "Email Verification",
  "Échec de la vérification de l'e-mail": "Email verification failed",
  "Renvoyer l'e-mail de vérification": "Resend Verification Email",
  "Aller au tableau de bord": "Go to Dashboard",
  "Aller à la page de connexion": "Go to Login",
  "N'oubliez pas de vérifier votre dossier spam": "Don't forget to check your spam folder",
  
  // Dashboard
  "Bienvenue": "Welcome",
  "Statistiques": "Statistics",
  "Vue d'ensemble": "Overview",
  
  // Bookings
  "Titre": "Title",
  "Mes Réservations": "My Bookings",
  "Créer une Réservation": "Create Booking",
  "Créer une nouvelle réservation": "Create New Booking",
  "Détails de la réservation": "Booking Details",
  "Modifier la réservation": "Edit Booking",
  "Liste des réservations": "Booking List",
  "Aucune réservation": "No bookings",
  "Vous n'avez aucune réservation pour le moment": "You don't have any bookings yet",
  "Créer votre première réservation": "Create your first booking",
  
  // Booking Form
  "Formulaire de réservation": "Booking Form",
  "Modifier le formulaire": "Edit Form",
  "Sélectionner un camion": "Select Truck",
  "Sélectionnez un camion...": "Select a truck...",
  "Type de service": "Service Type",
  "Transport": "Transport",
  "Location": "Rental",
  "Informations de ramassage": "Pickup Information",
  "Informations de destination": "Destination Information",
  "Informations sur la cargaison": "Cargo Information",
  "Informations de location": "Rental Information",
  "Adresse de ramassage": "Pickup Address",
  "Ville de ramassage": "Pickup City",
  "Adresse de destination": "Destination Address",
  "Ville de destination": "Destination City",
  "Date de ramassage": "Pickup Date",
  "Heure de ramassage": "Pickup Time",
  "Description de la cargaison": "Cargo Description",
  "Poids de la cargaison": "Cargo Weight",
  "Volume de la cargaison": "Cargo Volume",
  "Début de location": "Rental Start",
  "Fin de location": "Rental End",
  "Adresse de travail": "Work Address",
  "Objectif": "Purpose",
  "Opérateur requis": "Operator Required",
  "Estimation du prix": "Price Estimate",
  "Soumettre la réservation": "Submit Booking",
  "Mise à jour de la réservation": "Update Booking",
  "Capacité": "Capacity",
  "Informations sur le camion": "Truck Information",
  "Récapitulatif de la réservation": "Booking Summary",
  "kg": "kg",
  "m³": "m³",
  "Prix fixe": "Fixed Price",
  "par km": "per km",
  "par jour": "per day",
  "Calculé": "Calculated",
  "Distance estimée": "Estimated Distance",
  "Durée estimée": "Estimated Duration",
  "jours": "days",
  "Oui": "Yes",
  "Non": "No",
  
  // Trucks
  "Rechercher des Camions": "Find Trucks",
  "Liste des camions": "Truck List",
  "Aucun camion disponible": "No trucks available",
  "Type de camion": "Truck Type",
  "Capacité de poids": "Weight Capacity",
  "Capacité de volume": "Volume Capacity",
  "Prix par kilomètre": "Price per Kilometer",
  "Prix par jour": "Price per Day",
  "Disponibilité": "Availability",
  "Ville actuelle": "Current City",
  "Filtres": "Filters",
  "Tous les types": "All Types",
  "Toutes les villes": "All Cities",
  "Camion standard": "Standard Truck",
  "Citerne": "Tanker",
  "Frigorifique": "Refrigerated",
  "Plate-forme": "Flatbed",
  "Camionnette": "Van",
  
  // Provider
  "Profil du fournisseur": "Provider Profile",
  "Entreprise": "Company",
  "Informations de l'entreprise": "Company Information",
  "Nom de l'entreprise": "Company Name",
  "Numéro de téléphone professionnel": "Business Phone",
  "Secteur d'activité": "Industry Sector",
  "Personne de contact": "Contact Person",
  "Poste": "Position",
  "E-mail de contact": "Contact Email",
  "Téléphone de contact": "Contact Phone",
  
  // Documents
  "Documents": "Documents",
  "Mes Documents": "My Documents",
  "Télécharger un document": "Upload Document",
  "Type de document": "Document Type",
  "Nom du fichier": "File Name",
  "Date de téléversement": "Upload Date",
  "Vérification": "Verification",
  "Vérifié": "Verified",
  "Non vérifié": "Not Verified",
  "En révision": "Under Review",
  "Carte d'identité": "ID Card",
  "Permis de conduire": "Driver's License",
  "Registre du commerce": "Business Registration",
  "Assurance": "Insurance",
  "Carte grise": "Vehicle Registration",
  "Certificat technique": "Technical Certificate",
  
  // Notifications
  "Notifications": "Notifications",
  "Marquer tout comme lu": "Mark All as Read",
  "Aucune notification": "No Notifications",
  "Vous êtes à jour !": "You're all caught up!",
  "Nouvelle réservation": "New Booking",
  "Réservation confirmée": "Booking Confirmed",
  "Réservation annulée": "Booking Cancelled",
  "Réservation terminée": "Booking Completed",
  "Document vérifié": "Document Verified",
  "Document rejeté": "Document Rejected",
  "Message reçu": "Message Received",
  "il y a": "ago",
  "minute": "minute",
  "minutes": "minutes",
  "heure": "hour",
  "heures": "hours",
  "jour": "day",
  "jours": "days",
  "mois": "month",
  "an": "year",
  "maintenant": "now",
  "à l'instant": "just now",
  
  // Admin
  "Administration": "Administration",
  "Utilisateurs": "Users",
  "Fournisseurs": "Providers",
  "Analytiques": "Analytics",
  "Tableau de Bord Admin": "Admin Dashboard",
  "Gestion des utilisateurs": "User Management",
  "Gestion des fournisseurs": "Provider Management",
  "Gestion des réservations": "Booking Management",
  "Gestion des camions": "Truck Management",
  "Approbations en attente": "Pending Approvals",
  "Approuver le fournisseur": "Approve Provider",
  "Rejeter le fournisseur": "Reject Provider",
  "Compte": "Account",
  "Rôle": "Role",
  "Client": "Customer",
  "Fournisseur": "Provider",
  "Administrateur": "Administrator",
  "Inscrit le": "Registered on",
  "Dernière connexion": "Last Login",
  
  // Status
  "En attente d'approbation": "Pending Approval",
  "Approuvé": "Approved",
  "Rejeté": "Rejected",
  "Confirmé": "Confirmed",
  "En cours": "In Progress",
  "Annulé": "Cancelled",
  
  // Analytics
  "Analytiques": "Analytics",
  "Revenu total": "Total Revenue",
  "Réservations totales": "Total Bookings",
  "Taux de complétion": "Completion Rate",
  "Utilisateurs actifs": "Active Users",
  "ce mois": "this month",
  "terminées": "completed",
  "fournisseurs": "providers",
  "Plage de dates": "Date Range",
  "7 derniers jours": "Last 7 Days",
  "30 derniers jours": "Last 30 Days",
  "90 derniers jours": "Last 90 Days",
  "Personnalisé": "Custom",
  "De": "From",
  "À": "To",
  "Appliquer": "Apply",
  "Tendance du revenu": "Revenue Trend",
  "Statut des réservations": "Booking Status",
  "Entonnoir de conversion": "Conversion Funnel",
  "Itinéraires principaux": "Top Routes",
  "Évaluations des clients": "Customer Ratings",
  "Revenu moyen par réservation": "Average Booking Revenue",
  "Revenu transport": "Transport Revenue",
  "Revenu location": "Rental Revenue",
  "Revenu par mois": "Revenue by Month",
  "Répartition du revenu": "Revenue Breakdown",
  "Mois": "Month",
  "Réservations": "Bookings",
  "Service": "Service",
  "Volume de réservations": "Booking Volume",
  "Réservations par mois": "Bookings by Month",
  "Métriques de performance": "Performance Metrics",
  "Taux d'annulation": "Cancellation Rate",
  "Taux d'approbation": "Approval Rate",
  "Réservations par type de service": "Bookings by Service Type",
  "Nombre": "Count",
  "Total de véhicules": "Total Vehicles",
  "Actuellement actifs": "Currently Active",
  "Revenu moyen par véhicule": "Avg Revenue per Vehicle",
  "Performance des véhicules": "Vehicle Performance",
  "Métriques individuelles des véhicules et utilisation": "Individual vehicle metrics and utilization",
  "Véhicule": "Vehicle",
  "Type": "Type",
  "Revenu": "Revenue",
  "Valeur moyenne": "Avg Value",
  "achèvement": "completion",
  "En utilisation": "In Use",
  "Itinéraires totaux": "Total Routes",
  "Paires de villes uniques": "Unique City Pairs",
  "Revenu de l'itinéraire principal": "Top Route Revenue",
  "Revenu moyen par itinéraire": "Avg Route Revenue",
  "Moyenne par itinéraire": "Per Route Average",
  "Itinéraires principaux par revenu": "Top Routes by Revenue",
  "Itinéraires de transport les plus rentables": "Most Profitable Transportation Routes",
  "Rang": "Rank",
  "Itinéraire": "Route",
  "Revenu total": "Total Revenue",
  "Revenu moyen": "Avg Revenue",
  "Taux de réussite": "Success Rate",
  "Livraison à temps": "On-Time Delivery",
  "livraisons": "deliveries",
  "Temps de réponse moyen": "Avg Response Time",
  "Médiane": "Median",
  "Score de satisfaction": "Satisfaction Score",
  "clients satisfaits": "satisfied customers",
  "Insights de performance": "Performance Insights",
  "Performance de livraison": "Delivery Performance",
  "Taux de ponctualité": "On-Time Rate",
  "Métriques de réponse": "Response Metrics",
  "Moyenne": "Average",
  "Meilleures villes par revenu": "Top Cities by Revenue",
  "Distribution géographique de votre activité": "Geographic Distribution of Your Business",
  "Moy": "Avg",
  "Votre moyenne": "Your Average",
  "Moyenne du marché": "Market Average",
  "Votre fourchette": "Your Range",
  "Fourchette du marché": "Market Range",
  "Compétitif": "Competitive",
  "En dessous du marché": "Below Market",
  "Au dessus du marché": "Above Market",
  "Tendance de croissance": "Growth Trend",
  "Taux de croissance": "Growth Rate",
  "réservations/mois": "bookings/month",
  "mois de données collectées": "months of data collected",
  "Construction...": "Building...",
  "Prochain": "Next",
  "Mois": "Months",
  "réservations": "bookings",
  "Revenu prévu": "Predicted Revenue",
  "confiance": "confidence",
  "Construction de votre modèle de prévision": "Building Your Forecast Model",
  "Besoin d'au moins 1 mois d'historique de réservations pour générer des prévisions précises.": "Need at least 1 month of booking history to generate accurate predictions.",
  "mois collectés": "months collected",
  "plus nécessaires": "more needed",
  "Tendance historique et prévisions": "Historical Trend & Forecast",
  "Performance passée et réservations futures prévues": "Past Performance and Predicted Future Bookings",
  "Réel": "Actual",
  "Prévision": "Forecast",
  "Total de clients": "Total Customers",
  "Taux de fidélité": "Repeat Rate",
  "clients fidèles": "repeat customers",
  "Valeur à vie moyenne": "Avg Lifetime Value",
  "Valeur du meilleur client": "Top Customer Value",
  "Meilleurs clients par valeur à vie": "Top Customers by Lifetime Value",
  "Vos clients les plus précieux": "Your Most Valuable Customers",
  "Client": "Customer",
  "Valeur à vie": "Lifetime Value",
  "Dernière réservation": "Last Booking",
  "jours depuis la dernière réservation": "days since last booking",
  "Récent": "Recent",
  
  // Error Messages
  "Une erreur s'est produite": "An error occurred",
  "Veuillez réessayer": "Please try again",
  "Champ requis": "Required field",
  "Format invalide": "Invalid format",
  "Connexion échouée": "Login failed",
  "Inscription échouée": "Registration failed",
  "Mise à jour échouée": "Update failed",
  "Suppression échouée": "Deletion failed",
  "Téléversement échoué": "Upload failed",
  "Impossible de charger les données": "Unable to load data",
  "Session expirée": "Session expired",
  "Accès refusé": "Access denied",
  "Non autorisé": "Unauthorized",
  "Ressource introuvable": "Resource not found",
  "Erreur du serveur": "Server error",
  
  // Success Messages
  "Opération réussie": "Operation successful",
  "Enregistré avec succès": "Saved successfully",
  "Supprimé avec succès": "Deleted successfully",
  "Créé avec succès": "Created successfully",
  "Mis à jour avec succès": "Updated successfully",
  "Téléversé avec succès": "Uploaded successfully",
  "Envoyé avec succès": "Sent successfully",
  "Confirmé avec succès": "Confirmed successfully",
};

// Read current English file
const enPath = path.join(__dirname, 'client/src/i18n/locales/en.json');
const en = JSON.parse(fs.readFileSync(enPath, 'utf8'));

// Function to translate values
function translateObject(obj) {
  const result = {};
  
  for (const key in obj) {
    if (obj.hasOwnProperty(key)) {
      if (typeof obj[key] === 'object' && obj[key] !== null && !Array.isArray(obj[key])) {
        result[key] = translateObject(obj[key]);
      } else if (typeof obj[key] === 'string') {
        if (obj[key].startsWith('[EN] ')) {
          const french = obj[key].replace('[EN] ', '');
          result[key] = translations[french] || french;
        } else {
          result[key] = obj[key];
        }
      } else {
        result[key] = obj[key];
      }
    }
  }
  
  return result;
}

console.log('Translating placeholders to English...\n');

const translated = translateObject(en);

// Write back
fs.writeFileSync(enPath, JSON.stringify(translated, null, 2), 'utf8');

console.log('✅ Translation complete!');
console.log('   All French placeholders have been translated to English.');
